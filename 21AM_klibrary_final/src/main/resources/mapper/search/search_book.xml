<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="search">
   	<resultMap type="bookInfo" id="bookInfoMap">			
				<id column="ISBN_NO" property="isbnNo"/>
				<result column="BOOK_NAME" property="bookName"/>
				<result column="BOOK_WRITER" property="bookWriter"/>
				<result column="BOOK_COMPANY" property="bookCompany"/>
				<result column="BOOK_DATE" property="bookDate"/>
				<result column="BOOK_PRICE" property="bookPrice"/>
				<result column="BOOK_LOCATION" property="bookLocation"/>
				<result column="BOOK_CONTENT" property="bookContent"/>
				<result column="BOOK_IMG" property="bookImg"/>
				<result column="BOOK_KDC" property="bookKdc"/>
			
		</resultMap>
		
		<select id="selectBookList" resultMap="bookInfoMap">
		SELECT * FROM BOOK_INFO
	       <trim prefix="WHERE" prefixOverrides="AND|OR">
		 <if test= 'category == "all"' >
		   OR BOOK_NAME like '%'||#{keyword}||'%' OR
		    BOOK_WRITER like '%'||#{keyword}||'%' OR
		    BOOK_COMPANY like '%'||#{keyword}||'%' 
		  </if>
		  <if test= 'category =="book_name" and keyword != null'>
		   OR BOOK_NAME like '%'|| #{keyword}|| '%'
		  </if>
		  <if test= 'category =="book_writer" and keyword != null'>
		  OR BOOK_WRITER like '%'|| #{keyword}||'%'
		  </if>
		  <if test= 'category =="book_company" and keyword !=null'>
		  OR BOOK_COMPANY like '%'|| #{keyword}||'%'
		  </if>
		  </trim>
		</select>
  
        
</mapper>
